(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"/3On":function(l,n,e){"use strict";e.r(n);var u=e("8Y7J"),s=e("EnSQ"),t=e("LRne");let i=(()=>{class l{constructor(){}sauvegarderNote(l){localStorage.getItem("NotesSessions")?(this.notes=JSON.parse(localStorage.getItem("NotesSessions")),this.notes.find(n=>n.sessionId===l.sessionId)?(this.notes.find(n=>n.sessionId===l.sessionId).message=l.message,this.notes.find(n=>n.sessionId===l.sessionId).images=l.images):this.notes.push(l),localStorage.setItem("NotesSessions",JSON.stringify(this.notes))):(this.notes=[],this.notes.push(l),localStorage.setItem("NotesSessions",JSON.stringify(this.notes)))}recupererNoteParIdSession(l){return localStorage.getItem("NotesSessions")?(this.notes=JSON.parse(localStorage.getItem("NotesSessions")),this.notes.find(n=>n.sessionId===l)?Object(t.a)(this.notes.find(n=>n.sessionId===l)):Object(t.a)(null)):Object(t.a)(null)}}return l.ngInjectableDef=u.Mb({factory:function(){return new l},token:l,providedIn:"root"}),l})();var o=e("gcOT");class r{constructor(l,n,e,u){this.route=l,this.dataService=n,this.sessionsService=e,this.sanitizer=u,this.sessionId=l.snapshot.paramMap.get("id")}recupererDonnees(){this.dataService.recupererDonneesSessions().subscribe(l=>this.sessionData=l.find(l=>l.id.toString()===this.sessionId),()=>this.isErreurRecuperationSession=!0),this.sessionsService.recupererNoteParIdSession(this.sessionId).subscribe(l=>{null!=l?(this.contenuNote=l.message,this.imagesUrlBase64=l.images,this.imagesUrlBase64Sanitized=this.sanitizeTableauDUrls(l.images)):(this.contenuNote="",this.imagesUrlBase64=[],this.imagesUrlBase64Sanitized=[])})}enregistrerNote(){this.sessionsService.sauvegarderNote({sessionId:this.sessionId,message:this.contenuNote,images:this.imagesUrlBase64})}prendreUnePhoto(){o.c.Camera.getPhoto({quality:90,allowEditing:!0,resultType:o.a.Base64,source:o.b.Camera}).then(l=>{this.isErreurPriseDePhoto=!1,this.imagesUrlBase64.push("data:image/jpeg;base64, "+l.base64String),this.imagesUrlBase64Sanitized=this.sanitizeTableauDUrls(this.imagesUrlBase64)},()=>this.isErreurPriseDePhoto=!0)}chercherUnePhoto(){o.c.Camera.getPhoto({quality:90,allowEditing:!0,resultType:o.a.Base64,source:o.b.Photos}).then(l=>{this.isErreurRecuperationPhoto=!1,this.imagesUrlBase64.push("data:image/jpeg;base64, "+l.base64String),this.imagesUrlBase64Sanitized=this.sanitizeTableauDUrls(this.imagesUrlBase64)},()=>this.isErreurRecuperationPhoto=!0)}sanitizeTableauDUrls(l){return l.map(l=>this.sanitizer.bypassSecurityTrustUrl(l))}ngOnInit(){this.route.paramMap.subscribe(l=>{l.get("id")}),this.recupererDonnees()}}class a{}var b=e("pMnS"),c=e("oBZk"),g=e("ZZ/e"),h=e("SVse"),d=e("s7LF"),m=e("iInd"),p=e("cUpR"),f=u.pb({encapsulation:0,styles:["ion-textarea[_ngcontent-%COMP%] { border: dashed; border-color: silver; border-radius: 16px; background-color: #f5f6f9; font-style: italic}"],data:{}});function k(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),u.rb(1,0,null,null,3,"ion-text",[["color","danger"]],null,null,null,c.Y,c.x)),u.qb(2,49152,null,0,g.vb,[u.h,u.k,u.x],{color:[0,"color"]},null),(l()(),u.rb(3,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),u.Ib(-1,null,["Une erreur s'est produite dans la r\xe9cup\xe9ration des donn\xe9es de la session."]))],(function(l,n){l(n,2,0,"danger")}),null)}function S(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),u.rb(1,0,null,null,3,"ion-text",[["color","danger"]],null,null,null,c.Y,c.x)),u.qb(2,49152,null,0,g.vb,[u.h,u.k,u.x],{color:[0,"color"]},null),(l()(),u.rb(3,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),u.Ib(-1,null,["Une erreur s'est produite dans la prise de la photographie."]))],(function(l,n){l(n,2,0,"danger")}),null)}function I(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),u.rb(1,0,null,null,3,"ion-text",[["color","danger"]],null,null,null,c.Y,c.x)),u.qb(2,49152,null,0,g.vb,[u.h,u.k,u.x],{color:[0,"color"]},null),(l()(),u.rb(3,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),u.Ib(-1,null,["Une erreur s'est produite dans le chargement de l'image."]))],(function(l,n){l(n,2,0,"danger")}),null)}function x(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,4,"ion-card",[],null,null,null,c.K,c.f)),u.qb(1,49152,null,0,g.k,[u.h,u.k,u.x],null,null),(l()(),u.rb(2,0,null,0,2,"ion-card-content",[],null,null,null,c.G,c.g)),u.qb(3,49152,null,0,g.l,[u.h,u.k,u.x],null,null),(l()(),u.rb(4,0,null,0,0,"img",[["alt","photo"]],[[8,"src",4]],null,null,null,null))],null,(function(l,n){l(n,4,0,n.context.$implicit)}))}function q(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,33,null,null,null,null,null,null,null)),(l()(),u.rb(1,0,null,null,2,"ion-button",[["expand","block"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.enregistrerNote()&&u),u}),c.E,c.d)),u.qb(2,49152,null,0,g.i,[u.h,u.k,u.x],{expand:[0,"expand"]},null),(l()(),u.Ib(-1,0,[" Enregistrer "])),(l()(),u.gb(16777216,null,null,1,null,k)),u.qb(5,16384,null,0,h.i,[u.M,u.J],{ngIf:[0,"ngIf"]},null),(l()(),u.gb(16777216,null,null,1,null,S)),u.qb(7,16384,null,0,h.i,[u.M,u.J],{ngIf:[0,"ngIf"]},null),(l()(),u.gb(16777216,null,null,1,null,I)),u.qb(9,16384,null,0,h.i,[u.M,u.J],{ngIf:[0,"ngIf"]},null),(l()(),u.rb(10,0,null,null,23,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(l,n,e){var s=!0,t=l.component;return"submit"===n&&(s=!1!==u.Db(l,12).onSubmit(e)&&s),"reset"===n&&(s=!1!==u.Db(l,12).onReset()&&s),"ngSubmit"===n&&(s=!1!==t.enregistrerNote()&&s),s}),null,null)),u.qb(11,16384,null,0,d.k,[],null,null),u.qb(12,4210688,null,0,d.g,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),u.Fb(2048,null,d.a,null,[d.g]),u.qb(14,16384,null,0,d.f,[[4,d.a]],null,null),(l()(),u.rb(15,0,null,null,6,"ion-textarea",[["auto-grow","true"],["class","ion-margin-top"],["name","contenuNote"],["placeholder","Cette conf\xe9rence..."],["rows","4"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,e){var s=!0,t=l.component;return"ionBlur"===n&&(s=!1!==u.Db(l,16)._handleBlurEvent(e.target)&&s),"ionChange"===n&&(s=!1!==u.Db(l,16)._handleInputEvent(e.target)&&s),"ngModelChange"===n&&(s=!1!==(t.contenuNote=e)&&s),s}),c.Z,c.y)),u.qb(16,16384,null,0,g.Jb,[u.k],null,null),u.Fb(1024,null,d.c,(function(l){return[l]}),[g.Jb]),u.qb(18,671744,null,0,d.h,[[2,d.a],[8,null],[8,null],[6,d.c]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),u.Fb(2048,null,d.d,null,[d.h]),u.qb(20,16384,null,0,d.e,[[4,d.d]],null,null),u.qb(21,49152,null,0,g.wb,[u.h,u.k,u.x],{name:[0,"name"],placeholder:[1,"placeholder"],rows:[2,"rows"]},null),(l()(),u.rb(22,0,null,null,9,"ion-row",[],null,null,null,c.W,c.v)),u.qb(23,49152,null,0,g.hb,[u.h,u.k,u.x],null,null),(l()(),u.rb(24,0,null,0,3,"ion-fab-button",[["size","small"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.prendreUnePhoto()&&u),u}),c.M,c.l)),u.qb(25,49152,null,0,g.v,[u.h,u.k,u.x],{size:[0,"size"]},null),(l()(),u.rb(26,0,null,0,1,"ion-icon",[["ios","ios-camera"],["md","md-camera"]],null,null,null,c.O,c.n)),u.qb(27,49152,null,0,g.A,[u.h,u.k,u.x],{ios:[0,"ios"],md:[1,"md"]},null),(l()(),u.rb(28,0,null,0,3,"ion-fab-button",[["size","small"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.chercherUnePhoto()&&u),u}),c.M,c.l)),u.qb(29,49152,null,0,g.v,[u.h,u.k,u.x],{size:[0,"size"]},null),(l()(),u.rb(30,0,null,0,1,"ion-icon",[["name","images"]],null,null,null,c.O,c.n)),u.qb(31,49152,null,0,g.A,[u.h,u.k,u.x],{name:[0,"name"]},null),(l()(),u.gb(16777216,null,null,1,null,x)),u.qb(33,278528,null,0,h.h,[u.M,u.J,u.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var e=n.component;l(n,2,0,"block"),l(n,5,0,e.isErreurRecuperationSession),l(n,7,0,e.isErreurPriseDePhoto),l(n,9,0,e.isErreurRecuperationPhoto),l(n,18,0,"contenuNote",e.contenuNote),l(n,21,0,"contenuNote","Cette conf\xe9rence...","4"),l(n,25,0,"small"),l(n,27,0,"ios-camera","md-camera"),l(n,29,0,"small"),l(n,31,0,"images"),l(n,33,0,e.imagesUrlBase64Sanitized)}),(function(l,n){l(n,10,0,u.Db(n,14).ngClassUntouched,u.Db(n,14).ngClassTouched,u.Db(n,14).ngClassPristine,u.Db(n,14).ngClassDirty,u.Db(n,14).ngClassValid,u.Db(n,14).ngClassInvalid,u.Db(n,14).ngClassPending),l(n,15,0,u.Db(n,20).ngClassUntouched,u.Db(n,20).ngClassTouched,u.Db(n,20).ngClassPristine,u.Db(n,20).ngClassDirty,u.Db(n,20).ngClassValid,u.Db(n,20).ngClassInvalid,u.Db(n,20).ngClassPending)}))}function v(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,15,"ion-header",[["class","ion-text-center"]],null,null,null,c.N,c.m)),u.qb(1,49152,null,0,g.z,[u.h,u.k,u.x],null,null),(l()(),u.rb(2,0,null,0,13,"ion-toolbar",[],null,null,null,c.bb,c.A)),u.qb(3,49152,null,0,g.Ab,[u.h,u.k,u.x],null,null),(l()(),u.rb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,c.F,c.e)),u.qb(5,49152,null,0,g.j,[u.h,u.k,u.x],null,null),(l()(),u.rb(6,0,null,0,2,"ion-back-button",[["icon","arrow-back"],["text",""]],null,[[null,"click"]],(function(l,n,e){var s=!0;return"click"===n&&(s=!1!==u.Db(l,8).onClick(e)&&s),s}),c.D,c.c)),u.qb(7,49152,null,0,g.e,[u.h,u.k,u.x],{icon:[0,"icon"],text:[1,"text"]},null),u.qb(8,16384,null,0,g.f,[[2,g.gb],g.Fb],null,null),(l()(),u.rb(9,0,null,0,3,"ion-buttons",[["slot","end"]],null,null,null,c.F,c.e)),u.qb(10,49152,null,0,g.j,[u.h,u.k,u.x],null,null),(l()(),u.rb(11,0,null,0,1,"ion-menu-button",[],null,null,null,c.T,c.t)),u.qb(12,49152,null,0,g.P,[u.h,u.k,u.x],null,null),(l()(),u.rb(13,0,null,0,2,"ion-title",[],null,null,null,c.ab,c.z)),u.qb(14,49152,null,0,g.yb,[u.h,u.k,u.x],null,null),(l()(),u.Ib(-1,0,["Mes notes"])),(l()(),u.rb(16,0,null,null,11,"ion-content",[],null,null,null,c.L,c.k)),u.qb(17,49152,null,0,g.s,[u.h,u.k,u.x],null,null),(l()(),u.rb(18,0,null,0,9,"ion-card",[],null,null,null,c.K,c.f)),u.qb(19,49152,null,0,g.k,[u.h,u.k,u.x],null,null),(l()(),u.rb(20,0,null,0,3,"ion-card-header",[],null,null,null,c.H,c.h)),u.qb(21,49152,null,0,g.m,[u.h,u.k,u.x],null,null),(l()(),u.rb(22,0,null,0,1,"h1",[],null,null,null,null,null)),(l()(),u.Ib(23,null,["",""])),(l()(),u.rb(24,0,null,0,3,"ion-card-content",[],null,null,null,c.G,c.g)),u.qb(25,49152,null,0,g.l,[u.h,u.k,u.x],null,null),(l()(),u.gb(16777216,null,0,1,null,q)),u.qb(27,16384,null,0,h.i,[u.M,u.J],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,7,0,"arrow-back",""),l(n,27,0,!e.isErreurRecuperationSession)}),(function(l,n){var e=n.component;l(n,23,0,(null==e.sessionData?null:e.sessionData.titleMobile)||(null==e.sessionData?null:e.sessionData.title))}))}function D(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,1,"app-notes",[],null,null,null,v,f)),u.qb(1,114688,null,0,r,[m.a,s.a,i,p.b],null,null)],(function(l,n){l(n,1,0)}),null)}var B=u.nb("app-notes",r,D,{},{},[]);e.d(n,"NotesPageModuleNgFactory",(function(){return C}));var C=u.ob(a,[],(function(l){return u.Ab([u.Bb(512,u.j,u.Z,[[8,[b.a,B]],[3,u.j],u.v]),u.Bb(4608,h.k,h.j,[u.s,[2,h.r]]),u.Bb(4608,d.j,d.j,[]),u.Bb(4608,g.a,g.a,[u.x,u.g]),u.Bb(4608,g.Eb,g.Eb,[g.a,u.j,u.p]),u.Bb(4608,g.Hb,g.Hb,[g.a,u.j,u.p]),u.Bb(1073742336,h.b,h.b,[]),u.Bb(1073742336,d.i,d.i,[]),u.Bb(1073742336,d.b,d.b,[]),u.Bb(1073742336,g.Cb,g.Cb,[]),u.Bb(1073742336,m.p,m.p,[[2,m.u],[2,m.m]]),u.Bb(1073742336,a,a,[]),u.Bb(1024,m.k,(function(){return[[{path:"",component:r}]]}),[])])}))}}]);